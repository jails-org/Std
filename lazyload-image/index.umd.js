(function(b,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(b=typeof globalThis!="undefined"?globalThis:b||self,i(b["lazyload-image"]={}))})(this,function(b){"use strict";const i=typeof window!="undefined",S=i&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),H=i&&window.devicePixelRatio>1,fe={elements_selector:".lazy",container:S||i?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},V=e=>Object.assign({},fe,e),B=function(e,t){let n;const s="LazyLoad::Initialized",a=new e(t);try{n=new CustomEvent(s,{detail:{instance:a}})}catch(o){n=document.createEvent("CustomEvent"),n.initCustomEvent(s,!1,!1,{instance:a})}window.dispatchEvent(n)},he=(e,t)=>{if(t)if(t.length)for(let n,s=0;n=t[s];s+=1)B(e,n);else B(e,t)},r="src",x="srcset",O="sizes",F="poster",m="llOriginalAttrs",J="data",w="loading",P="loaded",U="applied",me="entered",C="error",q="native",K="data-",Q="ll-status",l=(e,t)=>e.getAttribute(K+t),pe=(e,t,n)=>{const s=K+t;n!==null?e.setAttribute(s,n):e.removeAttribute(s)},p=e=>l(e,Q),g=(e,t)=>pe(e,Q,t),I=e=>g(e,null),M=e=>p(e)===null,ve=e=>p(e)===w,Ee=e=>p(e)===C,z=e=>p(e)===q,Ie=[w,P,U,C],ye=e=>Ie.indexOf(p(e))>=0,d=(e,t,n,s)=>{e&&typeof e=="function"&&(s===void 0?n===void 0?e(t):e(t,n):e(t,n,s))},f=(e,t)=>{i&&t!==""&&e.classList.add(t)},c=(e,t)=>{i&&t!==""&&e.classList.remove(t)},ke=e=>{e.llTempImage=document.createElement("IMG")},Ae=e=>{delete e.llTempImage},W=e=>e.llTempImage,y=(e,t)=>{if(!t)return;const n=t._observer;n&&n.unobserve(e)},Le=e=>{e.disconnect()},xe=(e,t,n)=>{t.unobserve_entered&&y(e,n)},N=(e,t)=>{e&&(e.loadingCount+=t)},Oe=e=>{e&&(e.toLoadCount-=1)},X=(e,t)=>{e&&(e.toLoadCount=t)},we=e=>e.loadingCount>0,Ce=e=>e.toLoadCount>0,Y=e=>{let t=[];for(let n,s=0;n=e.children[s];s+=1)n.tagName==="SOURCE"&&t.push(n);return t},T=(e,t)=>{const n=e.parentNode;n&&n.tagName==="PICTURE"&&Y(n).forEach(t)},Z=(e,t)=>{Y(e).forEach(t)},k=[r],ee=[r,F],v=[r,x,O],te=[J],A=e=>!!e[m],ne=e=>e[m],se=e=>delete e[m],h=(e,t)=>{if(A(e))return;const n={};t.forEach(s=>{n[s]=e.getAttribute(s)}),e[m]=n},Me=e=>{A(e)||(e[m]={backgroundImage:e.style.backgroundImage})},$=(e,t)=>{if(!A(e))return;const n=ne(e);t.forEach(s=>{((a,o,u)=>{u?a.setAttribute(o,u):a.removeAttribute(o)})(e,s,n[s])})},ze=e=>{if(!A(e))return;const t=ne(e);e.style.backgroundImage=t.backgroundImage},ae=(e,t,n)=>{f(e,t.class_applied),g(e,U),n&&(t.unobserve_completed&&y(e,t),d(t.callback_applied,e,n))},oe=(e,t,n)=>{f(e,t.class_loading),g(e,w),n&&(N(n,1),d(t.callback_loading,e,n))},_=(e,t,n)=>{n&&e.setAttribute(t,n)},le=(e,t)=>{_(e,O,l(e,t.data_sizes)),_(e,x,l(e,t.data_srcset)),_(e,r,l(e,t.data_src))},Ne=(e,t)=>{T(e,n=>{h(n,v),le(n,t)}),h(e,v),le(e,t)},Te=(e,t)=>{h(e,k),_(e,r,l(e,t.data_src))},Re=(e,t)=>{Z(e,n=>{h(n,k),_(n,r,l(n,t.data_src))}),h(e,ee),_(e,F,l(e,t.data_poster)),_(e,r,l(e,t.data_src)),e.load()},De=(e,t)=>{h(e,te),_(e,J,l(e,t.data_src))},je=(e,t,n)=>{const s=l(e,t.data_bg),a=l(e,t.data_bg_hidpi),o=H&&a?a:s;o&&(e.style.backgroundImage=`url("${o}")`,W(e).setAttribute(r,o),oe(e,t,n))},Ge=(e,t,n)=>{const s=l(e,t.data_bg_multi),a=l(e,t.data_bg_multi_hidpi),o=H&&a?a:s;o&&(e.style.backgroundImage=o,ae(e,t,n))},Se=(e,t,n)=>{const s=l(e,t.data_bg_set);if(!s)return;let a=s.split("|").map(o=>`image-set(${o})`);e.style.backgroundImage=a.join(),ae(e,t,n)},ie={IMG:Ne,IFRAME:Te,VIDEO:Re,OBJECT:De},He=(e,t)=>{const n=ie[e.tagName];n&&n(e,t)},Ve=(e,t,n)=>{const s=ie[e.tagName];s&&(s(e,t),oe(e,t,n))},Be=["IMG","IFRAME","VIDEO","OBJECT"],Fe=e=>Be.indexOf(e.tagName)>-1,ce=(e,t)=>{!t||we(t)||Ce(t)||d(e.callback_finish,t)},re=(e,t,n)=>{e.addEventListener(t,n),e.llEvLisnrs[t]=n},Je=(e,t,n)=>{e.removeEventListener(t,n)},R=e=>!!e.llEvLisnrs,Pe=(e,t,n)=>{R(e)||(e.llEvLisnrs={});const s=e.tagName==="VIDEO"?"loadeddata":"load";re(e,s,t),re(e,"error",n)},D=e=>{if(!R(e))return;const t=e.llEvLisnrs;for(let n in t){const s=t[n];Je(e,n,s)}delete e.llEvLisnrs},de=(e,t,n)=>{Ae(e),N(n,-1),Oe(n),c(e,t.class_loading),t.unobserve_completed&&y(e,n)},Ue=(e,t,n,s)=>{const a=z(t);de(t,n,s),f(t,n.class_loaded),g(t,P),d(n.callback_loaded,t,s),a||ce(n,s)},qe=(e,t,n,s)=>{const a=z(t);de(t,n,s),f(t,n.class_error),g(t,C),d(n.callback_error,t,s),n.restore_on_error&&$(t,v),a||ce(n,s)},j=(e,t,n)=>{const s=W(e)||e;R(s)||Pe(s,a=>{Ue(0,e,t,n),D(s)},a=>{qe(0,e,t,n),D(s)})},G=(e,t,n)=>{Fe(e)?((s,a,o)=>{j(s,a,o),Ve(s,a,o)})(e,t,n):((s,a,o)=>{ke(s),j(s,a,o),Me(s),je(s,a,o),Ge(s,a,o),Se(s,a,o)})(e,t,n)},Ke=(e,t,n)=>{e.setAttribute("loading","lazy"),j(e,t,n),He(e,t),g(e,q)},_e=e=>{e.removeAttribute(r),e.removeAttribute(x),e.removeAttribute(O)},Qe=e=>{T(e,t=>{_e(t)}),_e(e)},ue=e=>{T(e,t=>{$(t,v)}),$(e,v)},We=e=>{Z(e,t=>{$(t,k)}),$(e,ee),e.load()},Xe=e=>{$(e,k)},Ye=e=>{$(e,te)},Ze={IMG:ue,IFRAME:Xe,VIDEO:We,OBJECT:Ye},et=(e,t)=>{(n=>{const s=Ze[n.tagName];s?s(n):ze(n)})(e),((n,s)=>{M(n)||z(n)||(c(n,s.class_entered),c(n,s.class_exited),c(n,s.class_applied),c(n,s.class_loading),c(n,s.class_loaded),c(n,s.class_error))})(e,t),I(e),se(e)},tt=(e,t,n,s)=>{n.cancel_on_exit&&ve(e)&&e.tagName==="IMG"&&(D(e),Qe(e),ue(e),c(e,n.class_loading),N(s,-1),I(e),d(n.callback_cancel,e,t,s))},nt=(e,t,n,s)=>{const a=ye(e);g(e,me),f(e,n.class_entered),c(e,n.class_exited),xe(e,n,s),d(n.callback_enter,e,t,s),a||G(e,n,s)},st=(e,t,n,s)=>{M(e)||(f(e,n.class_exited),tt(e,t,n,s),d(n.callback_exit,e,t,s))},at=["IMG","IFRAME","VIDEO"],ge=e=>e.use_native&&"loading"in HTMLImageElement.prototype,ot=(e,t,n)=>{e.forEach(s=>{at.indexOf(s.tagName)!==-1&&Ke(s,t,n)}),X(n,0)},lt=e=>e.isIntersecting||e.intersectionRatio>0,it=(e,t)=>{t.forEach(n=>{e.observe(n)})},ct=(e,t)=>{Le(e),it(e,t)},rt=(e,t)=>{ge(e)||(t._observer=new IntersectionObserver(n=>{((s,a,o)=>{s.forEach(u=>lt(u)?nt(u.target,u,a,o):st(u.target,u,a,o))})(n,e,t)},(n=>({root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"}))(e)))},$e=e=>Array.prototype.slice.call(e),L=e=>e.container.querySelectorAll(e.elements_selector),dt=e=>$e(e).filter(M),_t=e=>Ee(e),ut=e=>$e(e).filter(_t),be=(e,t)=>dt(e||L(t)),gt=(e,t)=>{ut(L(e)).forEach(n=>{c(n,e.class_error),I(n)}),t.update()},$t=(e,t)=>{i&&(t._onlineHandler=()=>{gt(e,t)},window.addEventListener("online",t._onlineHandler))},bt=e=>{i&&window.removeEventListener("online",e._onlineHandler)},E=function(e,t){const n=V(e);this._settings=n,this.loadingCount=0,rt(n,this),$t(n,this),this.update(t)};E.prototype={update:function(e){const t=this._settings,n=be(e,t);X(this,n.length),S?this.loadAll(n):ge(t)?ot(n,t,this):ct(this._observer,n)},destroy:function(){this._observer&&this._observer.disconnect(),bt(this),L(this._settings).forEach(e=>{se(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;be(e,t).forEach(n=>{y(n,this),G(n,t,this)})},restoreAll:function(){const e=this._settings;L(e).forEach(t=>{et(t,e)})}},E.load=(e,t)=>{const n=V(t);G(e,n)},E.resetStatus=e=>{I(e)},i&&he(E,window.lazyLoadOptions);const ft=E;b.Lazyload=ft,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
